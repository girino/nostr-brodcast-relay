# Broadcast Relay Configuration Example
# Copy this file and modify according to your needs
# Load it with: source example.env (or set variables manually)

# Comma-separated list of seed relay URLs
# These relays will be used for initial discovery and periodic refresh
# Default: ws://localhost:10547 (nak debug relay)
# SEED_RELAYS=wss://relay.damus.io,wss://relay.nostr.band,wss://nos.lol,wss://relay.snort.social,wss://relay.primal.net
SEED_RELAYS=ws://localhost:10547

# Comma-separated list of mandatory relay URLs
# These relays will ALWAYS receive broadcasts, regardless of their score
# Useful for ensuring events reach specific relays (e.g., your own relay)
# Default: none
# MANDATORY_RELAYS=wss://my-relay.com,wss://backup-relay.com
MANDATORY_RELAYS=

# Number of top relays to broadcast events to
# Higher numbers = more coverage, but more bandwidth/connections
# Default: 50
TOP_N_RELAYS=50

# Port for the relay server to listen on
# Default: 3334
RELAY_PORT=3334

# How often to refresh the relay list from seed relays
# Format: duration string (e.g., "24h", "12h", "1h30m")
# Default: 24h
REFRESH_INTERVAL=24h

# How often to perform health checks on relays
# Format: duration string (e.g., "5m", "10m", "1h")
# Default: 5m
HEALTH_CHECK_INTERVAL=5m

# Timeout for initial relay testing during discovery
# Format: duration string (e.g., "5s", "10s")
# Default: 5s
INITIAL_TIMEOUT=5s

# Decay factor for exponential moving average of success rate
# Range: 0.0 to 1.0 (higher = more weight on historical data)
# Default: 0.95
SUCCESS_RATE_DECAY=0.95

# Number of worker goroutines for event broadcasting
# 0 or negative = auto-detect (2 * number of CPU cores)
# Default: 0 (auto)
WORKER_COUNT=0

# Event cache Time-To-Live (TTL)
# Events are cached to prevent duplicate broadcasts
# After TTL expires, the same event can be rebroadcast
# Format: duration string (e.g., "5m", "1h", "30s", "1h30m")
# Default: 5m
CACHE_TTL=5m

# Relay Metadata (NIP-11 and Main Page)
# These values are shown in relay info and on the main web page

# Relay name - shown in NIP-11 and main page
# Default: "Broadcast Relay"
RELAY_NAME=Broadcast Relay

# Relay description - explains what your relay does
# Default: "A Nostr relay that broadcasts events to multiple relays"
RELAY_DESCRIPTION=A Nostr relay that broadcasts events to multiple relays

# Relay WebSocket URL - your public relay address (ws:// or wss://)
# Example: wss://relay.example.com or ws://your-onion-address.onion
# Default: empty (you should set this)
RELAY_URL=

# Contact public key - npub or hex format
# People can contact you about this relay
# Example: npub1abc... or hex format
# Default: empty
CONTACT_PUBKEY=

# Relay private key (nsec format) - used to derive relay pubkey and sign events
# ⚠️  KEEP THIS SECRET! Store securely!
# Generate with: nak key generate (or any Nostr key generator)
# Example: nsec1abc...
# Default: empty
RELAY_PRIVKEY=

# Relay icon URL - square image for branding (recommended: 1024x1024)
# Shows in NIP-11 info and main page
# Default: /static/icon1.png (local file)
# Example: https://your-domain.com/icon.png (override with URL)
# Leave empty to use default
RELAY_ICON=

# Relay banner URLs - wide images for main page (recommended: 1500x500)
# Comma-separated list of banner URLs
# One banner is randomly selected for each page view
# Default: /static/banner1.png,...,/static/banner6.png (6 local files)
# Example: https://cdn.example.com/banner1.jpg,https://cdn.example.com/banner2.jpg
# Leave empty to use default local banners
RELAY_BANNERS=
